---
name: cam-notify
description: "Use when receiving a CAM system event (permission_request, waiting_for_input, agent_exited, error) to decide whether to notify user, auto-approve, or request human confirmation. Covers three-layer decision model (whitelist, blacklist, LLM judgment), risk levels, message formatting, and reply routing."
---

# CAM System Event å¤„ç†æŒ‡å—

å½“ä½ æ”¶åˆ°æ¥è‡ª CAM çš„ system event æ—¶ï¼Œä½¿ç”¨æ­¤ skill å¤„ç†ã€‚

## When to Use

- æ”¶åˆ° CAM å‘é€çš„ system event webhook
- éœ€è¦å†³å®šæ˜¯å¦é€šçŸ¥ç”¨æˆ·
- éœ€è¦è‡ªåŠ¨å®¡æ‰¹ permission_request
- éœ€è¦æ ¼å¼åŒ–é€šçŸ¥æ¶ˆæ¯
- éœ€è¦è·¯ç”±ç”¨æˆ·å›žå¤åˆ°æ­£ç¡®çš„ Agent

## When NOT to Use

- ç®¡ç† Agent ç”Ÿå‘½å‘¨æœŸï¼ˆä½¿ç”¨ **cam** skillï¼‰
- Team ç¼–æŽ’å’Œå¤š Agent åä½œï¼ˆä½¿ç”¨ **agent-teams** skillï¼‰

## System Event æ•°æ®ç»“æž„

CAM å‘é€çš„ system event æ ¼å¼ï¼š

```json
{
  "source": "cam",
  "version": "1.0",
  "agent_id": "cam-xxx",
  "event_type": "permission_request",
  "urgency": "HIGH",
  "project_path": "/path/to/project",
  "timestamp": "2026-02-18T10:00:00Z",
  "event_data": {
    "tool_name": "Bash",
    "tool_input": {"command": "npm install express"}
  },
  "context": {
    "terminal_snapshot": "...",
    "extracted_message": "AI æå–çš„æ ¼å¼åŒ–æ¶ˆæ¯",
    "question_fingerprint": "npm-install-express-confirm",
    "message_type": "confirmation",
    "options": [],
    "risk_level": "MEDIUM"
  }
}
```

### Context å­—æ®µè¯´æ˜Ž

| å­—æ®µ | ç±»åž‹ | è¯´æ˜Ž |
|------|------|------|
| `terminal_snapshot` | string? | åŽŸå§‹ç»ˆç«¯å¿«ç…§ï¼ˆæœ€åŽ 30-80 è¡Œï¼‰ |
| `extracted_message` | string? | AI æå–çš„æ ¼å¼åŒ–æ¶ˆæ¯ï¼ŒåŒ…å«å®Œæ•´é—®é¢˜å’Œé€‰é¡¹ |
| `question_fingerprint` | string? | è¯­ä¹‰æŒ‡çº¹ï¼Œç”¨äºŽåŽ»é‡ï¼ˆå¦‚ `npm-install-express-confirm`ï¼‰ |
| `message_type` | string? | é—®é¢˜ç±»åž‹ï¼š`choice`/`confirmation`/`open_ended` |
| `options` | array? | é€‰é¡¹åˆ—è¡¨ï¼ˆä»… `choice` ç±»åž‹ï¼‰ |
| `risk_level` | string | é£Žé™©ç­‰çº§ï¼š`LOW`/`MEDIUM`/`HIGH` |

**é‡è¦**ï¼šä¼˜å…ˆä½¿ç”¨ `extracted_message`ï¼Œå®ƒåŒ…å« AI æå–çš„å®Œæ•´ä¸Šä¸‹æ–‡ã€‚åªæœ‰å½“ `extracted_message` ä¸ºç©ºæ—¶æ‰å›žé€€åˆ° `terminal_snapshot`ã€‚

### Event Types

> **æ³¨æ„**: Webhook payload ä¸­ `event_type` ä½¿ç”¨ snake_caseï¼ˆå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼‰ã€‚ä»£ç å†…éƒ¨æžšä¸¾ä½¿ç”¨ PascalCaseï¼ˆå¦‚ `WaitingForInput`ï¼‰ï¼Œåºåˆ—åŒ–æ—¶è‡ªåŠ¨è½¬æ¢ã€‚

| event_type | æè¿° | å…¸åž‹ urgency |
|------------|------|-------------|
| `permission_request` | æƒé™è¯·æ±‚ï¼ˆå·¥å…·æ‰§è¡Œç¡®è®¤ï¼‰ | HIGH |
| `waiting_for_input` | ç­‰å¾…ç”¨æˆ·è¾“å…¥ | HIGH |
| `notification` | ä¸€èˆ¬é€šçŸ¥ | MEDIUM/LOW |
| `agent_exited` | Agent é€€å‡º | MEDIUMï¼ˆæ­£å¸¸ï¼‰/ HIGHï¼ˆå¼‚å¸¸ï¼‰|
| `error` | é”™è¯¯å‘ç”Ÿ | HIGH |
| `session_start` | ä¼šè¯å¯åŠ¨ | LOW |
| `session_end` | ä¼šè¯ç»“æŸ | LOW |

### Risk Levels

> **æƒå¨æ¥æº**: æ­¤å¤„æ˜¯é£Žé™©ç­‰çº§çš„å®Œæ•´å®šä¹‰ã€‚agent-teams skill ä¸­çš„é£Žé™©ç­‰çº§å¼•ç”¨æ­¤å¤„ã€‚

| risk_level | æè¿° | ç¤ºä¾‹ |
|------------|------|------|
| LOW | å®‰å…¨æ“ä½œ | `ls`, `cat`, `/tmp/` è·¯å¾„ |
| MEDIUM | éœ€ç¡®è®¤ | `npm install`, `git push`, é¡¹ç›®æ–‡ä»¶ |
| HIGH | é«˜é£Žé™© | `rm -rf`, `sudo`, ç³»ç»Ÿæ–‡ä»¶ |

## ä¸‰å±‚å†³ç­–æ¨¡åž‹

```
å‘½ä»¤/ç¡®è®¤è¯·æ±‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ä¸€å±‚ï¼šç™½åå• â†’ ç›´æŽ¥æ‰¹å‡†            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ ä¸åœ¨ç™½åå•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬äºŒå±‚ï¼šé»‘åå• â†’ å¿…é¡»äººå·¥ç¡®è®¤        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ ä¸åœ¨é»‘åå•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ä¸‰å±‚ï¼šLLM åˆ¤æ–­ â†’ æ™ºèƒ½å†³ç­–          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¬¬ä¸€å±‚ï¼šç™½åå•ï¼ˆç›´æŽ¥æ‰¹å‡†ï¼‰

```
# åªè¯»å‘½ä»¤
git status, git diff, git log
ls, pwd, which, cat, head, tail

# æµ‹è¯•å‘½ä»¤
cargo test, cargo check, cargo clippy
npm test, npm run lint, npm run build
yarn test, pytest, go test, tsc --noEmit
```

**âš ï¸ å‚æ•°å®‰å…¨æ£€æŸ¥**ï¼šå³ä½¿å‘½ä»¤åœ¨ç™½åå•ï¼Œå¦‚æžœå‚æ•°åŒ…å«ä»¥ä¸‹æ•æ„Ÿè·¯å¾„ï¼Œä»éœ€äººå·¥ç¡®è®¤ï¼š

```
/etc/, ~/.ssh/, ~/.aws/, ~/.config/
.env, credentials, secret, token, password, id_rsa
```

**ç¤ºä¾‹**ï¼š
- `cat README.md` â†’ âœ… è‡ªåŠ¨æ‰¹å‡†
- `cat /etc/passwd` â†’ âš ï¸ äººå·¥ç¡®è®¤ï¼ˆæ•æ„Ÿè·¯å¾„ï¼‰
- `ls ~/.ssh/` â†’ âš ï¸ äººå·¥ç¡®è®¤ï¼ˆæ•æ„Ÿè·¯å¾„ï¼‰

### ç¬¬äºŒå±‚ï¼šé»‘åå•ï¼ˆå¿…é¡»äººå·¥ç¡®è®¤ï¼‰

```
# åˆ é™¤ç±»å‘½ä»¤
rm, rmdir, delete, drop, truncate

# å†³ç­–ç±»æç¤º
åŒ…å« "brainstorm", "é€‰æ‹©æ–¹æ¡ˆ", "which approach", "ä½ æƒ³è¦" çš„æç¤º

# ç”Ÿäº§/éƒ¨ç½²ç›¸å…³
deploy, push --force, production, release

# å‘½ä»¤é“¾å’Œé‡å®šå‘
åŒ…å« &&, ||, ;, |, >, >>, <, $(), `` çš„å‘½ä»¤

# çŽ¯å¢ƒå˜é‡å±•å¼€
åŒ…å« $VAR å½¢å¼çš„å˜é‡å¼•ç”¨
```

### ç¬¬ä¸‰å±‚ï¼šLLM åˆ¤æ–­

ä¸åœ¨ç™½åå•ä¹Ÿä¸åœ¨é»‘åå•çš„å‘½ä»¤ï¼Œåˆ†æžé£Žé™©åŽå†³ç­–ï¼š

- LOW: åªè¯»æ“ä½œã€ä¸å½±å“ç³»ç»ŸçŠ¶æ€ã€å¯é€†æ“ä½œã€/tmp/ è·¯å¾„ â†’ è‡ªåŠ¨æ‰¹å‡†
- MEDIUM: å†™å…¥æ“ä½œä½†å½±å“èŒƒå›´æœ‰é™ã€é¡¹ç›®å†…æ–‡ä»¶ â†’ è‡ªåŠ¨æ‰¹å‡†å¹¶é€šçŸ¥
- HIGH: åˆ é™¤ã€è¦†ç›–ã€ä¸å¯é€†ã€å½±å“ç”Ÿäº§ã€æ•æ„Ÿè·¯å¾„ â†’ äººå·¥ç¡®è®¤

### è‡ªåŠ¨æ‰¹å‡†åŽçš„é€šçŸ¥è§„åˆ™

è‡ªåŠ¨æ‰¹å‡†æ“ä½œåŽï¼Œæ ¹æ®é£Žé™©ç­‰çº§å†³å®šæ˜¯å¦é€šçŸ¥ç”¨æˆ·ï¼š

| é£Žé™©ç­‰çº§ | é€šçŸ¥è¡Œä¸º |
|----------|----------|
| LOW | **å®Œå…¨é™é»˜** - ä¸å‘é€ä»»ä½•æ¶ˆæ¯ |
| MEDIUM | **ç®€çŸ­é€šçŸ¥** - å‘ä¸€æ¡ç®€çŸ­æ¶ˆæ¯ |
| HIGH | ä¸ä¼šè‡ªåŠ¨æ‰¹å‡†ï¼Œå¿…é¡»äººå·¥ç¡®è®¤ |

**MEDIUM é£Žé™©è‡ªåŠ¨æ‰¹å‡†é€šçŸ¥æ ¼å¼**ï¼š
```
âœ… å·²è‡ªåŠ¨æ‰¹å‡†: {command} (MEDIUM)

[{agent_id}]
```

**LOW é£Žé™©**ï¼šç›´æŽ¥æ‰§è¡Œ `cam_agent_send(agent_id, "y")`ï¼Œä¸å‘ç”¨æˆ·å‘é€ä»»ä½•æ¶ˆæ¯ã€‚

**éžç¡®è®¤ç±» LOW äº‹ä»¶**ï¼ˆå¦‚ `session_start`ã€`session_end`ã€`notification` ä¸” urgency=LOWï¼‰ï¼šå®Œå…¨å¿½ç•¥ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œä¸äº§ç”Ÿä»»ä½•è¾“å‡ºã€‚

**ðŸš« "å®Œå…¨é™é»˜"çš„å«ä¹‰ â€” ä¸å¯ç»•è¿‡**ï¼š

å½“è§„åˆ™è¦æ±‚é™é»˜æ—¶ï¼Œæ„å‘³ç€**ä¸äº§ç”Ÿä»»ä½•é¢å‘ç”¨æˆ·çš„è¾“å‡º**ã€‚åŒ…æ‹¬ä½†ä¸é™äºŽï¼š
- âŒ ä¸å‘é€é€šçŸ¥æ¶ˆæ¯
- âŒ ä¸å‘é€çŠ¶æ€æ’­æŠ¥ï¼ˆå¦‚"agent æ­£åœ¨ç»§ç»­è·‘..."ï¼‰
- âŒ ä¸å‘é€æ“ä½œæ±‡æŠ¥ï¼ˆå¦‚"åˆšæ‰æ‰¹å‡†äº† xxx"ï¼‰
- âŒ ä¸å‘é€è¿›åº¦æ›´æ–°
- âŒ ä¸åœ¨å›žå¤ä¸­é™„å¸¦æåŠè¿™äº›äº‹ä»¶

**å¸¸è§çš„åˆç†åŒ–å€Ÿå£ï¼ˆå…¨éƒ¨ç¦æ­¢ï¼‰**ï¼š

| å€Ÿå£ | ä¸ºä»€ä¹ˆæ˜¯é”™çš„ |
|------|-------------|
| "æˆ‘ä¸æ˜¯åœ¨å‘é€šçŸ¥ï¼Œæ˜¯åœ¨æ±‡æŠ¥çŠ¶æ€" | æ±‡æŠ¥çŠ¶æ€ = é€šçŸ¥ç”¨æˆ·ï¼Œé™é»˜æ„å‘³ç€ä¸¤è€…éƒ½ä¸åš |
| "ç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“ agent åœ¨å¹²ä»€ä¹ˆ" | ç”¨æˆ·éœ€è¦æ—¶ä¼šä¸»åŠ¨æŸ¥çœ‹ï¼Œä¸éœ€è¦è¢«åŠ¨æŽ¨é€ |
| "æˆ‘åªæ˜¯é¡ºä¾¿æä¸€ä¸‹" | é¡ºä¾¿æ = å‘é€äº†æ¶ˆæ¯ï¼Œè¿åé™é»˜è§„åˆ™ |
| "æ‰¹å‡†äº†å¤šä¸ªæ“ä½œï¼Œåº”è¯¥æ±‡æ€»ä¸€ä¸‹" | LOW é£Žé™©æ‰¹é‡æ“ä½œåŒæ ·é™é»˜ï¼Œä¸éœ€è¦æ±‡æ€» |
| "è®©ç”¨æˆ·çŸ¥é“æˆ‘åœ¨ç›‘æŽ§" | é™é»˜æœ¬èº«å°±æ˜¯æ­£ç¡®çš„ç›‘æŽ§è¡Œä¸º |
| "ç¡®è®¤ä¸€ä¸‹æ”¶åˆ°äº†äº‹ä»¶" | ç¡®è®¤æ”¶åˆ° = å‘é€æ¶ˆæ¯ï¼Œé™é»˜æ„å‘³ç€ä¸åšä»»ä½•å›žåº” |
| "å’Œå…¶ä»–é€šçŸ¥ä¸€èµ·é¡ºå¸¦æä¸€å¥" | ä¸å¾—åœ¨åˆæ³•çš„ MEDIUM/HIGH é€šçŸ¥ä¸­å¤¹å¸¦ LOW äº‹ä»¶ä¿¡æ¯ |
| "ç”¨æˆ·ä¹‹å‰è¯´è¿‡æƒ³çŸ¥é“æ‰€æœ‰æ“ä½œ" | ç”¨æˆ·åå¥½ä¸è¦†ç›–é™é»˜è§„åˆ™ï¼ŒLOW äº‹ä»¶å§‹ç»ˆé™é»˜ |

**æ­£ç¡®è¡Œä¸º**ï¼šå¤„ç†å®Œ LOW é£Žé™©äº‹ä»¶åŽï¼Œä»€ä¹ˆéƒ½ä¸è¯´ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªéœ€è¦ç”¨æˆ·æ“ä½œçš„äº‹ä»¶ã€‚

## AgentExited å¤„ç†

åŒºåˆ†æ­£å¸¸é€€å‡ºå’Œå¼‚å¸¸é€€å‡ºï¼š

| é€€å‡ºç±»åž‹ | åˆ¤æ–­æ¡ä»¶ | Urgency | è¡Œä¸º |
|----------|----------|---------|------|
| æ­£å¸¸å®Œæˆ | exit code 0 | LOW | é™é»˜æˆ–ç®€çŸ­é€šçŸ¥ |
| å¼‚å¸¸é€€å‡º | exit code != 0 | HIGH | ç«‹å³é€šçŸ¥ç”¨æˆ· |
| è¶…æ—¶é€€å‡º | è¶…è¿‡é…ç½®æ—¶é—´ | MEDIUM | é€šçŸ¥ç”¨æˆ· |

## é€šçŸ¥èšåˆï¼ˆSwarm åœºæ™¯ï¼‰

åˆ†å±‚èšåˆï¼Œæ ¹æ® urgency çº§åˆ«ä½¿ç”¨ä¸åŒçª—å£ï¼š

| Urgency | èšåˆçª—å£ | è¡Œä¸º |
|---------|----------|------|
| HIGH | ä¸èšåˆ | ç«‹å³å‘é€ |
| MEDIUM | 30 ç§’ | åˆå¹¶åŒç±»é€šçŸ¥ |
| LOW | â€” | **å®Œå…¨é™é»˜** â€” ä¸èšåˆã€ä¸é€šçŸ¥ã€ä¸äº§ç”Ÿä»»ä½•ç”¨æˆ·å¯è§è¾“å‡º |

**èšåˆæ ¼å¼**ï¼š
```
âœ… [refactor-team] å·²è‡ªåŠ¨æ‰¹å‡† 5 ä¸ªæ“ä½œ:
  - git status (dev1, dev2, dev3)
  - cargo check (dev1, dev2)
```

## æ¶ˆæ¯æ ¼å¼åŒ–è§„åˆ™

**æ ¸å¿ƒåŽŸåˆ™**ï¼šç”¨æˆ·ä¸çœ‹ç»ˆç«¯ä¹Ÿèƒ½ç†è§£é—®é¢˜å¹¶åšå‡ºå†³ç­–ã€‚

### æ¶ˆæ¯æ¥æºä¼˜å…ˆçº§

1. **ä¼˜å…ˆä½¿ç”¨ `extracted_message`** - AI å·²æå–å®Œæ•´ä¸Šä¸‹æ–‡
2. **å›žé€€åˆ° `terminal_snapshot`** - å½“ AI æå–å¤±è´¥æ—¶
3. **æœ€åŽä½¿ç”¨ `event_data`** - æž„é€ åŸºæœ¬ä¿¡æ¯

### æ ¹æ® message_type æ ¼å¼åŒ–

#### é€‰æ‹©é¢˜ (choice)

å½“ `context.message_type == "choice"` æ—¶ï¼š

```
ðŸ’¬ éœ€è¦ä½ é€‰æ‹©

ðŸ“‹ é—®é¢˜:
{extracted_message ä¸­çš„é—®é¢˜æ–‡æœ¬}

ðŸ”¢ é€‰é¡¹:
{éåŽ† context.optionsï¼Œä¿æŒåŽŸå§‹ç¼–å·}
A) é€‰é¡¹ä¸€æè¿°
B) é€‰é¡¹äºŒæè¿°
C) é€‰é¡¹ä¸‰æè¿°

ðŸ“ å›žå¤å­—æ¯é€‰æ‹© (A/B/C)

[{agent_id}]
```

#### ç¡®è®¤é¢˜ (confirmation)

å½“ `context.message_type == "confirmation"` æˆ– `event_type == "permission_request"` æ—¶ï¼š

```
âš ï¸ è¯·æ±‚ç¡®è®¤

ðŸ”§ æ“ä½œ:
{tool_name}: {tool_input çš„å…³é”®ä¿¡æ¯}

ðŸ’¡ ä¸Šä¸‹æ–‡:
{extracted_message ä¸­çš„èƒŒæ™¯è¯´æ˜Žï¼Œå¦‚æžœæœ‰}

âš¡ é£Žé™©: {risk_level_emoji} {risk_level}

ðŸ“ å›žå¤ y å…è®¸ / n æ‹’ç»

[{agent_id}]
```

#### å¼€æ”¾å¼é—®é¢˜ (open_ended)

å½“ `context.message_type == "open_ended"` æ—¶ï¼š

```
ðŸ’¬ éœ€è¦ä½ è¾“å…¥

ðŸ“‹ é—®é¢˜:
{extracted_message ä¸­çš„å®Œæ•´é—®é¢˜}

ðŸ’¡ èƒŒæ™¯:
{å¦‚æžœ extracted_message åŒ…å«èƒŒæ™¯ä¿¡æ¯}

ðŸ“ ç›´æŽ¥å›žå¤ä½ çš„ç­”æ¡ˆ

[{agent_id}]
```

### AI æå–å¤±è´¥æ—¶çš„å¤„ç†

å½“ `extracted_message` ä¸ºç©ºæˆ– AI æå–å¤±è´¥æ—¶ï¼š

```
âš ï¸ éœ€è¦ä½ çš„è¾“å…¥

ðŸ“‹ æ— æ³•è§£æžå…·ä½“é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ç»ˆç«¯

ðŸ–¥ï¸ ç»ˆç«¯å¿«ç…§:
{terminal_snapshot æœ€åŽ 20 è¡Œï¼ŒåŽ»é™¤ UI å™ªéŸ³}

ðŸ“ æŸ¥çœ‹ç»ˆç«¯åŽå›žå¤

[{agent_id}]
```

**å¤„ç†æ­¥éª¤**ï¼š
1. æ£€æŸ¥ `context.extracted_message` æ˜¯å¦å­˜åœ¨ä¸”éžç©º
2. å¦‚æžœä¸ºç©ºï¼Œä½¿ç”¨ `terminal_snapshot` çš„æœ€åŽ 20 è¡Œ
3. è¿‡æ»¤æŽ‰æ˜Žæ˜¾çš„ UI å™ªéŸ³ï¼ˆè¿›åº¦æ¡ã€åŠ¨ç”»å­—ç¬¦ç­‰ï¼‰
4. æ˜Žç¡®å‘ŠçŸ¥ç”¨æˆ·éœ€è¦æŸ¥çœ‹ç»ˆç«¯

### é£Žé™©ç­‰çº§ Emoji

| risk_level | Emoji | å«ä¹‰ |
|------------|-------|------|
| LOW | ðŸŸ¢ | å®‰å…¨æ“ä½œï¼Œå¯æ”¾å¿ƒæ‰§è¡Œ |
| MEDIUM | ðŸŸ¡ | éœ€è¦ç¡®è®¤ï¼Œä½†é£Žé™©å¯æŽ§ |
| HIGH | ðŸ”´ | é«˜é£Žé™©ï¼Œè¯·ä»”ç»†æ£€æŸ¥ |

### é”™è¯¯é€šçŸ¥

```
âŒ é‡åˆ°é”™è¯¯

{error_message}

å›žå¤æŸ¥çœ‹è¯¦æƒ…æˆ–å¤„ç†å»ºè®®

[{agent_id}]
```

### è‡ªåŠ¨æ‰¹å‡†é€šçŸ¥

```
âœ… å·²è‡ªåŠ¨æ‰¹å‡†: {command}

[{agent_id}]
```

## Common Mistakes

| é”™è¯¯ | æ­£ç¡®åšæ³• |
|------|----------|
| LOW é£Žé™©äº‹ä»¶æ—¶å‘ç”¨æˆ·å‘é€çŠ¶æ€æ›´æ–° | LOW äº‹ä»¶å®Œå…¨é™é»˜ï¼Œä¸äº§ç”Ÿä»»ä½•ç”¨æˆ·å¯è§è¾“å‡º |
| æœªæ£€æŸ¥ `extracted_message` æ˜¯å¦ä¸º null å°±ä½¿ç”¨ | å¿…é¡»å…ˆæ£€æŸ¥ï¼Œä¸º null æ—¶å›žé€€åˆ° `terminal_snapshot` |
| åœ¨åˆæ³•é€šçŸ¥ä¸­å¤¹å¸¦ LOW äº‹ä»¶ä¿¡æ¯ | æ¯æ¡é€šçŸ¥åªåŒ…å«è§¦å‘å®ƒçš„é‚£ä¸ªäº‹ä»¶ |
| ä¸åŒºåˆ† `message_type` ç›´æŽ¥ç”Ÿæˆé€šçŸ¥ | å¿…é¡»æŒ‰ choice/confirmation/open_ended ä½¿ç”¨å¯¹åº”æ¨¡æ¿ |

## ç”¨æˆ·å›žå¤å¤„ç†

å½“ç”¨æˆ·å›žå¤æ—¶ï¼Œè°ƒç”¨ CAM Plugin å·¥å…·ï¼š

| ç”¨æˆ·å›žå¤ | æ“ä½œ |
|----------|------|
| y / yes / å…è®¸ | `cam_agent_send(agent_id, "y")` |
| n / no / æ‹’ç» | `cam_agent_send(agent_id, "n")` |
| 1 / 2 / 3 | `cam_agent_send(agent_id, "1")` ç­‰ |
| å…¶ä»–æ–‡æœ¬ | `cam_agent_send(agent_id, ç”¨æˆ·è¾“å…¥)` |

### å›žå¤å·¥å…·

æ‰€æœ‰å›žå¤å·¥å…·å‡å¯é€šè¿‡ CAM Plugin è°ƒç”¨ï¼ˆ`cam_` å‰ç¼€ï¼‰ï¼š

| å·¥å…· | è¯´æ˜Ž |
|------|------|
| `cam_agent_send(agent_id, message)` | å‘æŒ‡å®š agent å‘é€æ¶ˆæ¯ |
| `cam_get_pending_confirmations()` | èŽ·å–æ‰€æœ‰å¾…å¤„ç†çš„ç¡®è®¤è¯·æ±‚ |
| `cam_reply_pending(reply, target?)` | å›žå¤å¾…å¤„ç†ç¡®è®¤ï¼ˆæ”¯æŒ y/n/1/2/3 å¿«æ·å›žå¤ï¼‰ |
| `cam_handle_user_reply(reply, context?)` | å¤„ç†è‡ªç„¶è¯­è¨€å›žå¤ï¼ˆè‡ªåŠ¨è§£æžæ„å›¾ï¼‰ |

### æ‰¹é‡å›žå¤

æ”¯æŒæ‰¹é‡æ“ä½œï¼š

| å‘½ä»¤ | è¯´æ˜Ž |
|------|------|
| `cam reply y --all` | æ‰¹å‡†æ‰€æœ‰å¾…å¤„ç†è¯·æ±‚ |
| `cam reply y --agent cam-*` | æ‰¹å‡†æŒ‡å®š agent çš„è¯·æ±‚ |
| `cam reply y --risk low` | æ‰¹å‡†æ‰€æœ‰ LOW é£Žé™©è¯·æ±‚ |

### Team å›žå¤è·¯ç”±

å¦‚æžœ agent_id åŒ…å« team ä¿¡æ¯ï¼ˆå¦‚ `team-xxx/member`ï¼‰ï¼š
- ä½¿ç”¨ `cam_inbox_send(team, member, reply)` å‘é€å›žå¤

## é‡å¤ç¡®è®¤æœºåˆ¶

é¦–æ¬¡äººå·¥æ‰¹å‡†çš„å‘½ä»¤ï¼Œ5 åˆ†é’Ÿå†…ç›¸åŒå‘½ä»¤è‡ªåŠ¨æ‰¹å‡†ï¼š

- å‘½ä»¤å¿…é¡»**å®Œå…¨ç›¸ç­‰**ï¼ˆåŒ…æ‹¬æ‰€æœ‰å‚æ•°ï¼‰
- æ£€æµ‹åˆ°å‘½ä»¤é“¾ç¬¦å·æ—¶ä¸è‡ªåŠ¨æ‰¹å‡†
- çŠ¶æ€å­˜å‚¨åœ¨ OpenClaw ä¼šè¯ä¸­ï¼ˆä¼šè¯ç»“æŸæ¸…ç©ºï¼‰

## å®Œæ•´ç¤ºä¾‹åœºæ™¯

### åœºæ™¯ 1: é€‰æ‹©é¢˜ - é¡¹ç›®æ–¹å‘å†³ç­–

**æ”¶åˆ°çš„ Payload**:
```json
{
  "agent_id": "cam-abc123",
  "event_type": "waiting_for_input",
  "urgency": "HIGH",
  "context": {
    "extracted_message": "ä½ æƒ³è¦å¢žå¼ºçŽ°æœ‰çš„ React Todo List è¿˜æ˜¯ä»Žå¤´å¼€å§‹ï¼Ÿ\n\nA) å¢žå¼ºçŽ°æœ‰é¡¹ç›® - åœ¨å½“å‰ä»£ç åŸºç¡€ä¸Šæ·»åŠ æ–°åŠŸèƒ½\nB) ä»Žå¤´å¼€å§‹ - ä½¿ç”¨æœ€æ–°æœ€ä½³å®žè·µåˆ›å»ºå…¨æ–°é¡¹ç›®",
    "question_fingerprint": "react-todo-enhance-or-fresh",
    "message_type": "choice",
    "options": ["å¢žå¼ºçŽ°æœ‰é¡¹ç›®", "ä»Žå¤´å¼€å§‹"],
    "risk_level": "LOW"
  }
}
```

**å‘é€ç»™ç”¨æˆ·çš„æ¶ˆæ¯**:
```
ðŸ’¬ éœ€è¦ä½ é€‰æ‹©

ðŸ“‹ é—®é¢˜:
ä½ æƒ³è¦å¢žå¼ºçŽ°æœ‰çš„ React Todo List è¿˜æ˜¯ä»Žå¤´å¼€å§‹ï¼Ÿ

ðŸ”¢ é€‰é¡¹:
A) å¢žå¼ºçŽ°æœ‰é¡¹ç›® - åœ¨å½“å‰ä»£ç åŸºç¡€ä¸Šæ·»åŠ æ–°åŠŸèƒ½
B) ä»Žå¤´å¼€å§‹ - ä½¿ç”¨æœ€æ–°æœ€ä½³å®žè·µåˆ›å»ºå…¨æ–°é¡¹ç›®

ðŸ“ å›žå¤å­—æ¯é€‰æ‹© (A/B)

[cam-abc123]
```

**ç”¨æˆ·å›žå¤**: `A`
**æ‰§è¡Œ**: `cam_agent_send("cam-abc123", "A")`

### åœºæ™¯ 2: ç¡®è®¤é¢˜ - å±é™©å‘½ä»¤

**æ”¶åˆ°çš„ Payload**:
```json
{
  "agent_id": "cam-xyz789",
  "event_type": "permission_request",
  "urgency": "HIGH",
  "event_data": {
    "tool_name": "Bash",
    "tool_input": {"command": "rm -rf ./dist && rm -rf ./node_modules"}
  },
  "context": {
    "extracted_message": "æ¸…ç†æž„å»ºäº§ç‰©å’Œä¾èµ–ç›®å½•ï¼Œå‡†å¤‡å…¨æ–°æž„å»º",
    "message_type": "confirmation",
    "risk_level": "HIGH"
  }
}
```

**å‘é€ç»™ç”¨æˆ·çš„æ¶ˆæ¯**:
```
âš ï¸ è¯·æ±‚ç¡®è®¤

ðŸ”§ æ“ä½œ:
Bash: rm -rf ./dist && rm -rf ./node_modules

ðŸ’¡ ä¸Šä¸‹æ–‡:
æ¸…ç†æž„å»ºäº§ç‰©å’Œä¾èµ–ç›®å½•ï¼Œå‡†å¤‡å…¨æ–°æž„å»º

âš¡ é£Žé™©: ðŸ”´ HIGH

ðŸ“ å›žå¤ y å…è®¸ / n æ‹’ç»

[cam-xyz789]
```

**ç”¨æˆ·å›žå¤**: `y`
**æ‰§è¡Œ**: `cam_agent_send("cam-xyz789", "y")`

### åœºæ™¯ 3: å¼€æ”¾å¼é—®é¢˜ - éœ€è¦ç”¨æˆ·è¾“å…¥

**æ”¶åˆ°çš„ Payload**:
```json
{
  "agent_id": "cam-def456",
  "event_type": "waiting_for_input",
  "urgency": "HIGH",
  "context": {
    "extracted_message": "è¯·æä¾›ä½ çš„ GitHub Personal Access Tokenï¼Œç”¨äºŽåˆ›å»º PR",
    "message_type": "open_ended",
    "risk_level": "MEDIUM"
  }
}
```

**å‘é€ç»™ç”¨æˆ·çš„æ¶ˆæ¯**:
```
ðŸ’¬ éœ€è¦ä½ è¾“å…¥

ðŸ“‹ é—®é¢˜:
è¯·æä¾›ä½ çš„ GitHub Personal Access Tokenï¼Œç”¨äºŽåˆ›å»º PR

ðŸ“ ç›´æŽ¥å›žå¤ä½ çš„ç­”æ¡ˆ

[cam-def456]
```

**ç”¨æˆ·å›žå¤**: `ghp_xxxxxxxxxxxx`
**æ‰§è¡Œ**: `cam_agent_send("cam-def456", "ghp_xxxxxxxxxxxx")`

### åœºæ™¯ 4: AI æå–å¤±è´¥ - Fallback å¤„ç†

**æ”¶åˆ°çš„ Payload**:
```json
{
  "agent_id": "cam-fail001",
  "event_type": "waiting_for_input",
  "urgency": "HIGH",
  "context": {
    "terminal_snapshot": "...\nâº æˆ‘åˆ†æžäº†ä½ çš„ä»£ç ç»“æž„...\n\nä½ è§‰å¾—è¿™ä¸ªæ–¹æ¡ˆæ€Žä¹ˆæ ·ï¼Ÿ\nâ¯ ",
    "extracted_message": null,
    "risk_level": "MEDIUM"
  }
}
```

**å‘é€ç»™ç”¨æˆ·çš„æ¶ˆæ¯**:
```
âš ï¸ éœ€è¦ä½ çš„è¾“å…¥

ðŸ“‹ æ— æ³•è§£æžå…·ä½“é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ç»ˆç«¯

ðŸ–¥ï¸ ç»ˆç«¯å¿«ç…§:
âº æˆ‘åˆ†æžäº†ä½ çš„ä»£ç ç»“æž„...

ä½ è§‰å¾—è¿™ä¸ªæ–¹æ¡ˆæ€Žä¹ˆæ ·ï¼Ÿ
â¯

ðŸ“ æŸ¥çœ‹ç»ˆç«¯åŽå›žå¤

[cam-fail001]
```

### åœºæ™¯ 5: è‡ªåŠ¨æ‰¹å‡† â€” ä¸åŒé£Žé™©ç­‰çº§å¯¹æ¯”

| | LOW é£Žé™© | MEDIUM é£Žé™© |
|---|---------|------------|
| ç¤ºä¾‹å‘½ä»¤ | `cargo test` | `npm install express` |
| åŒ¹é…è§„åˆ™ | ç™½åå•å‘½ä¸­ | LLM åˆ¤æ–­ |
| æ˜¯å¦è‡ªåŠ¨æ‰¹å‡† | æ˜¯ | æ˜¯ |
| é€šçŸ¥ç”¨æˆ· | **å¦ï¼ˆå®Œå…¨é™é»˜ï¼‰** | æ˜¯ï¼ˆç®€çŸ­é€šçŸ¥ï¼‰ |

**LOW é£Žé™©å¤„ç†æµç¨‹**:
1. æ£€æŸ¥ç™½åå• â†’ `cargo test` åœ¨ç™½åå•ä¸­
2. æ£€æŸ¥å‚æ•°å®‰å…¨ â†’ æ— æ•æ„Ÿè·¯å¾„
3. è‡ªåŠ¨æ‰¹å‡†ï¼Œæ‰§è¡Œ `cam_agent_send("cam-auto001", "y")`
4. **ä¸é€šçŸ¥ç”¨æˆ·**ï¼ˆLOW é£Žé™©é™é»˜ï¼‰

**MEDIUM é£Žé™©å¤„ç†æµç¨‹**:
1. æ£€æŸ¥ç™½åå• â†’ `npm install` ä¸åœ¨ç™½åå•
2. æ£€æŸ¥é»‘åå• â†’ ä¸åœ¨é»‘åå•
3. LLM åˆ¤æ–­ â†’ MEDIUM é£Žé™©ï¼Œè‡ªåŠ¨æ‰¹å‡†
4. æ‰§è¡Œ `cam_agent_send("cam-med001", "y")`
5. å‘é€ç®€çŸ­é€šçŸ¥

**MEDIUM é£Žé™©é€šçŸ¥**:
```
âœ… å·²è‡ªåŠ¨æ‰¹å‡†: npm install express (MEDIUM)

[cam-med001]
```

### åœºæ™¯ 6: Agent å¼‚å¸¸é€€å‡º

**æ”¶åˆ°çš„ Payload**:
```json
{
  "agent_id": "cam-exit001",
  "event_type": "agent_exited",
  "urgency": "HIGH",
  "event_data": {
    "exit_code": 1,
    "reason": "Process terminated unexpectedly"
  },
  "context": {
    "terminal_snapshot": "...\nerror: could not compile `myapp`\n",
    "risk_level": "HIGH"
  }
}
```

**å‘é€ç»™ç”¨æˆ·çš„æ¶ˆæ¯**:
```
âŒ Agent å¼‚å¸¸é€€å‡º

é€€å‡ºç : 1
åŽŸå› : Process terminated unexpectedly

æœ€åŽè¾“å‡º:
error: could not compile `myapp`

å›žå¤ "resume" æ¢å¤ä¼šè¯ï¼Œæˆ– "logs" æŸ¥çœ‹å®Œæ•´æ—¥å¿—

[cam-exit001]
```
