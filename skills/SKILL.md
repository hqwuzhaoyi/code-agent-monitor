---
name: code-agent-monitor
description: ç›‘æ§å’Œç®¡ç† AI ç¼–ç ä»£ç†è¿›ç¨‹ (Claude Code, OpenCode, Codex)ã€‚ç”¨äºåˆ—å‡ºè¿è¡Œä¸­çš„ä»£ç†ã€æŸ¥çœ‹ä¼šè¯ã€æ¢å¤ä»»åŠ¡ã€å‘é€è¾“å…¥æˆ–ç»ˆæ­¢è¿›ç¨‹ã€‚æ”¯æŒ Agent Teams å¤š Agent åä½œã€‚
---

# Code Agent Monitor (CAM)

ç›‘æ§å’Œç®¡ç†ç³»ç»Ÿä¸­æ‰€æœ‰ AI ç¼–ç ä»£ç†è¿›ç¨‹ã€‚

## ç›¸å…³ Skills

- **[agent-teams](./agent-teams/SKILL.md)** - åˆ›å»ºä¸“å®¶å›¢é˜Ÿå®Œæˆå¤æ‚ä»»åŠ¡ï¼ˆå¤š Agent åä½œã€è¿œç¨‹ç®¡ç†ã€é£é™©è¯„ä¼°ï¼‰
- **[cam-notify](./cam-notify/SKILL.md)** - é€šçŸ¥ç³»ç»Ÿé…ç½®

## ä½¿ç”¨æ–¹å¼

CAM é€šè¿‡ OpenClaw plugin æä¾› MCP å·¥å…·ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼š

### Agent ç®¡ç†å·¥å…·

| å·¥å…· | æè¿° |
|------|------|
| `cam_agent_list` | åˆ—å‡ºæ‰€æœ‰è¿è¡Œä¸­çš„ä»£ç† |
| `cam_agent_start` | å¯åŠ¨æ–°ä»£ç† |
| `cam_agent_stop` | åœæ­¢ä»£ç† |
| `cam_agent_send` | å‘ä»£ç†å‘é€æ¶ˆæ¯ |
| `cam_agent_logs` | è·å–ä»£ç†ç»ˆç«¯è¾“å‡ºï¼ˆæ³¨æ„ï¼šæ˜¾ç¤ºçš„ç™¾åˆ†æ¯”æ˜¯ context å ç”¨ç‡ï¼Œä¸æ˜¯ä»»åŠ¡è¿›åº¦ï¼‰ |
| `cam_agent_status` | è·å–ä»£ç†ç»“æ„åŒ–çŠ¶æ€ |
| `cam_list_sessions` | åˆ—å‡ºå†å²ä¼šè¯ |
| `cam_resume_session` | æ¢å¤å†å²ä¼šè¯ |

### Team ç®¡ç†å·¥å…·

| å·¥å…· | æè¿° |
|------|------|
| `team_create` | åˆ›å»ºæ–° Teamï¼ˆå‚æ•°ï¼šname, description, project_pathï¼‰ |
| `team_delete` | åˆ é™¤ Team |
| `team_status` | è·å– Team çŠ¶æ€ï¼ˆæˆå‘˜ã€ä»»åŠ¡ã€æ¶ˆæ¯ï¼‰ |
| `inbox_read` | è¯»å–æˆå‘˜ inbox |
| `inbox_send` | å‘é€æ¶ˆæ¯åˆ°æˆå‘˜ inbox |
| `team_pending_requests` | è·å–ç­‰å¾…ä¸­çš„æƒé™è¯·æ±‚ |

### Team ç¼–æ’å·¥å…·ï¼ˆAgent Teams ä¸“å®¶ï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `team_orchestrate` | æ ¹æ®ä»»åŠ¡æè¿°è‡ªåŠ¨åˆ›å»ºå›¢é˜Ÿå¹¶å¯åŠ¨ Agents |
| `team_spawn_agent` | åœ¨å›¢é˜Ÿä¸­å¯åŠ¨æ–° Agent |
| `team_progress` | è·å–å›¢é˜Ÿèšåˆè¿›åº¦ï¼ˆæˆå‘˜çŠ¶æ€ã€ç­‰å¾…è¾“å…¥ï¼‰ |
| `team_shutdown` | ä¼˜é›…å…³é—­å›¢é˜Ÿï¼ˆåœæ­¢æ‰€æœ‰ Agentsï¼‰ |
| `team_assign_task` | åˆ†é…ä»»åŠ¡ç»™å›¢é˜Ÿæˆå‘˜ |

### å¿«æ·å›å¤å·¥å…·

| å·¥å…· | æè¿° |
|------|------|
| `get_pending_confirmations` | è·å–æ‰€æœ‰å¾…å¤„ç†çš„ç¡®è®¤è¯·æ±‚ |
| `reply_pending` | å›å¤å¾…å¤„ç†ç¡®è®¤ï¼ˆæ”¯æŒ y/n/1/2/3 å¿«æ·å›å¤ï¼‰ |
| `handle_user_reply` | å¤„ç†è‡ªç„¶è¯­è¨€å›å¤ï¼ˆè‡ªåŠ¨è§£ææ„å›¾ï¼‰ |

## æ‰‹åŠ¨ tmux æ“ä½œï¼ˆè°ƒè¯•ç”¨ï¼‰

å½“éœ€è¦ç›´æ¥æ“ä½œ CAM ç®¡ç†çš„ tmux ä¼šè¯æ—¶ï¼š

```bash
# åˆ—å‡ºæ‰€æœ‰ tmux ä¼šè¯
tmux list-sessions

# æŸ¥çœ‹ä¼šè¯ç»ˆç«¯è¾“å‡ºï¼ˆæœ€è¿‘ 50 è¡Œï¼‰
tmux capture-pane -t cam-xxxxxxx -p -S -50

# å‘é€æ¶ˆæ¯åˆ°ä¼šè¯ï¼ˆé‡è¦ï¼šæ–‡æœ¬å’Œ Enter å¿…é¡»åˆ†å¼€å‘é€ï¼‰
tmux send-keys -t cam-xxxxxxx "ä½ çš„æ¶ˆæ¯"
tmux send-keys -t cam-xxxxxxx Enter

# å‘é€ Ctrl+C ä¸­æ–­å½“å‰æ“ä½œ
tmux send-keys -t cam-xxxxxxx C-c
```

**æ³¨æ„**ï¼š`tmux send-keys` å‘é€æ–‡æœ¬å’Œå›è½¦é”®æ—¶ï¼Œå¿…é¡»åˆ†æˆä¸¤æ¡å‘½ä»¤ã€‚

---

## è‡ªç„¶è¯­è¨€ç†è§£æŒ‡å—

ç”¨æˆ·ä¸ä¼šè¯´"è°ƒç”¨ agent_start"ï¼Œè€Œæ˜¯ç”¨æ—¥å¸¸è¯­è¨€ã€‚æ ¹æ®ä»¥ä¸‹æ˜ å°„ç†è§£æ„å›¾ï¼š

### æ„å›¾è¯†åˆ«

| ç”¨æˆ·å¯èƒ½è¯´çš„ | æ„å›¾ | å¯¹åº”æ“ä½œ |
|-------------|------|---------|
| "çœ‹çœ‹åœ¨å¹²å˜›" / "æœ‰ä»€ä¹ˆä»»åŠ¡" / "ç°åœ¨è·‘ç€ä»€ä¹ˆ" | æŸ¥çœ‹çŠ¶æ€ | agent_list |
| "ç»§ç»­" / "æ¥ç€å¹²" / "go" | ç»§ç»­æ‰§è¡Œ | send_input åˆ°å½“å‰ agent |
| "y" / "n" / "æ˜¯" / "å¦" / "å¥½" / "å¯ä»¥" | ç¡®è®¤/æ‹’ç» | send_input åŸæ ·å‘é€ |
| "å¸®æˆ‘çœ‹çœ‹ xxx é¡¹ç›®" / "xxx é¡¹ç›®çš„ä¼šè¯" | æŸ¥æ‰¾ä¼šè¯ | list_sessions + project_path è¿‡æ»¤ |
| "æ¢å¤ä¸Šæ¬¡çš„" / "ç»§ç»­ä¹‹å‰çš„" / "æ¥ç€ä¸Šæ¬¡" | æ¢å¤ä¼šè¯ | æ‰¾æœ€è¿‘ä¼šè¯ + resume_session |
| "åœ¨ xxx å¯åŠ¨" / "å¼€ä¸ªæ–°çš„" | å¯åŠ¨æ–° agent | agent_start |
| "åœ" / "åˆ«å¹²äº†" / "å–æ¶ˆ" | åœæ­¢ | agent_stop |
| "çœ‹çœ‹è¾“å‡º" / "å¹²äº†ä»€ä¹ˆ" / "è¿›åº¦æ€æ ·" | æŸ¥çœ‹æ—¥å¿— | agent_logs æˆ– agent_status |
| "æ€ä¹ˆäº†" / "å¡ä½äº†å—" / "ä»€ä¹ˆæƒ…å†µ" | è¯Šæ–­çŠ¶æ€ | agent_status |

### Team ç®¡ç†æ„å›¾è¯†åˆ«

| ç”¨æˆ·å¯èƒ½è¯´çš„ | æ„å›¾ | å¯¹åº”æ“ä½œ |
|-------------|------|---------|
| "å¸®æˆ‘ä¿®å¤ xxx bug" / "åœ¨ xxx é¡¹ç›®åš yyy" | åˆ›å»º Team æ‰§è¡Œä»»åŠ¡ | team_create + è‡ªåŠ¨å¯åŠ¨ |
| "çœ‹çœ‹ team åœ¨å¹²å˜›" / "team è¿›åº¦æ€æ ·" | æŸ¥çœ‹ Team çŠ¶æ€ | team_status |
| "xxx team æ€ä¹ˆäº†" / "xxx é¡¹ç›®è¿›åº¦" | æŸ¥çœ‹ç‰¹å®š Team | team_status + team_name |
| "åœæ‰ xxx team" / "å–æ¶ˆ xxx ä»»åŠ¡" | åˆ é™¤ Team | team_delete |
| "y" / "n" / "å…è®¸" / "æ‹’ç»" | å›å¤æƒé™è¯·æ±‚ | inbox_send åˆ°ç­‰å¾…ä¸­çš„ agent |
| "çœ‹çœ‹æ¶ˆæ¯" / "æœ‰ä»€ä¹ˆé€šçŸ¥" | æŸ¥çœ‹ inbox | inbox_read |
| "å‘Šè¯‰ developer xxx" / "ç»™ xxx å‘æ¶ˆæ¯" | å‘é€æ¶ˆæ¯ | inbox_send |
| "æœ‰ä»€ä¹ˆç­‰ç€æˆ‘" / "å¾…å¤„ç†" | æŸ¥çœ‹å¾…å¤„ç†è¯·æ±‚ | team_pending_requests |

### æ¨¡ç³Šè¾“å…¥å¤„ç†

å½“ç”¨æˆ·è¾“å…¥ä¸æ˜ç¡®æ—¶ï¼š

1. **ç¼ºå°‘é¡¹ç›®è·¯å¾„**: "å¯åŠ¨ä¸€ä¸ª Claude" â†’ è¯¢é—® "è¦åœ¨å“ªä¸ªé¡¹ç›®å¯åŠ¨ï¼Ÿ"
2. **ç¼ºå°‘ agent æŒ‡å‘**: "ç»§ç»­" ä½†æœ‰å¤šä¸ª agent â†’ åˆ—å‡ºé€‰é¡¹è®©ç”¨æˆ·é€‰
3. **ç¼ºå°‘ä¼šè¯ ID**: "æ¢å¤ä¹‹å‰çš„" â†’ åˆ—å‡ºæœ€è¿‘ 3 ä¸ªä¼šè¯ä¾›é€‰æ‹©

---

## ä¸Šä¸‹æ–‡ç®¡ç†

### è®°ä½å½“å‰çŠ¶æ€

åœ¨å¯¹è¯è¿‡ç¨‹ä¸­ï¼Œç»´æŠ¤ä»¥ä¸‹ä¸Šä¸‹æ–‡ï¼š

| ä¸Šä¸‹æ–‡ | ç”¨é€” | æ›´æ–°æ—¶æœº |
|--------|------|----------|
| `current_agent_id` | ç”¨æˆ·è¯´"ç»§ç»­"æ—¶çš„é»˜è®¤ç›®æ ‡ | å¯åŠ¨/æ¢å¤ agent åæ›´æ–° |
| `current_project` | ç”¨æˆ·è¯´"å¯åŠ¨"æ—¶çš„é»˜è®¤é¡¹ç›® | ç”¨æˆ·æåŠé¡¹ç›®æ—¶æ›´æ–° |

### ä¸Šä¸‹æ–‡æ¨æ–­è§„åˆ™

1. **å• agent åœºæ™¯**: åªæœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ agent æ—¶ï¼Œæ‰€æœ‰æ“ä½œé»˜è®¤æŒ‡å‘å®ƒ
2. **å¤š agent åœºæ™¯**: ä¼˜å…ˆä½¿ç”¨æœ€è¿‘äº¤äº’çš„ agentï¼Œä¸ç¡®å®šæ—¶åˆ—å‡ºé€‰é¡¹
3. **æ—  agent åœºæ™¯**: ç”¨æˆ·è¯´"ç»§ç»­"æ—¶ï¼Œè‡ªåŠ¨æŸ¥æ‰¾æœ€è¿‘çš„ä¼šè¯å¹¶è¯¢é—®æ˜¯å¦æ¢å¤

---

## æ‰§è¡Œåé¦ˆ

æ¯æ¬¡æ“ä½œåç®€è¦æ±‡æŠ¥ï¼š

```
# å¯åŠ¨
"å·²å¯åŠ¨ Claude @ myapp é¡¹ç›® (cam-abc123)"

# å‘é€è¾“å…¥
"å·²å‘é€ï¼ŒAgent ç»§ç»­æ‰§è¡Œä¸­..."

# æ¢å¤
"å·²æ¢å¤ä¼šè¯ï¼ŒAgent åœ¨è·‘äº†"

# åœæ­¢
"å·²åœæ­¢ cam-abc123"
```

### å¼‚å¸¸å¤„ç†

```
# tmux ä¼šè¯ä¸å­˜åœ¨
"è¿™ä¸ª Agent å·²ç»ä¸åœ¨äº†ï¼Œå¯èƒ½å·²é€€å‡ºã€‚è¦æŸ¥çœ‹å†å²ä¼šè¯å—ï¼Ÿ"

# é¡¹ç›®è·¯å¾„ä¸å­˜åœ¨
"æ‰¾ä¸åˆ°è¿™ä¸ªé¡¹ç›®è·¯å¾„ï¼Œç¡®è®¤ä¸€ä¸‹ï¼Ÿ"

# å¤šä¸ªåŒ¹é…
"æ‰¾åˆ°å¤šä¸ªåŒ¹é…çš„ä¼šè¯ï¼Œä½ è¦å“ªä¸ªï¼Ÿ"
```

---

## å®Œæ•´ç¤ºä¾‹å¯¹è¯

### ç¤ºä¾‹ 1ï¼šä»é›¶å¼€å§‹ä¸€ä¸ªä»»åŠ¡

```
ç”¨æˆ·: å¸®æˆ‘åœ¨ myapp é¡¹ç›®è·‘ä¸ª Claude
åŠ©æ‰‹: å¥½ï¼Œå¯åŠ¨ä¸­...
      âœ… å·²å¯åŠ¨ Claude @ ~/workspace/myapp (cam-1706789012)

[å‡ åˆ†é’Ÿå]
åŠ©æ‰‹: â¸ï¸ Agent åœ¨ç­‰ä½ ç¡®è®¤:
      "è¦åˆ›å»º src/utils.rs å—ï¼Ÿ[Y/n]"

ç”¨æˆ·: y
åŠ©æ‰‹: å·²å‘é€ï¼Œç»§ç»­æ‰§è¡Œä¸­...

[ä»»åŠ¡å®Œæˆ]
åŠ©æ‰‹: âœ… Agent å®Œæˆäº†ã€‚è¦çœ‹çœ‹åšäº†ä»€ä¹ˆå—ï¼Ÿ

ç”¨æˆ·: çœ‹çœ‹
åŠ©æ‰‹: æœ€è¿‘æ“ä½œ:
      - Edit src/main.rs
      - Write src/utils.rs
      - Edit Cargo.toml
      ç»ˆç«¯è¾“å‡º: "å®Œæˆï¼Œå…±ä¿®æ”¹ 3 ä¸ªæ–‡ä»¶"
```

### ç¤ºä¾‹ 2ï¼šæ¢å¤ä¸­æ–­çš„ä»»åŠ¡

```
ç”¨æˆ·: ç»§ç»­ä¹‹å‰çš„
åŠ©æ‰‹: æœ€è¿‘çš„ä¼šè¯:
      1. myapp - "å®ç°ç”¨æˆ·è®¤è¯" (3å°æ—¶å‰)
      2. backend - "ä¿®å¤ API bug" (æ˜¨å¤©)
      æ¢å¤å“ªä¸ªï¼Ÿ

ç”¨æˆ·: 1
åŠ©æ‰‹: æ¢å¤ä¸­...
      âœ… å·²æ¢å¤ myapp ä¼šè¯ (cam-1706789099)

ç”¨æˆ·: æ¥ç€æŠŠç™»å½•åŠŸèƒ½åšå®Œ
åŠ©æ‰‹: å·²å‘é€ï¼ŒAgent å¼€å§‹å¹²æ´»äº†
```

### ç¤ºä¾‹ 3ï¼šå¤š Agent ç®¡ç†

```
ç”¨æˆ·: ç°åœ¨è·‘ç€ä»€ä¹ˆ
åŠ©æ‰‹: 2 ä¸ª Agent åœ¨è¿è¡Œ:
      1. cam-abc123 | myapp | è¿è¡Œä¸­
      2. cam-def456 | backend | ç­‰å¾…è¾“å…¥

ç”¨æˆ·: 2 æ€ä¹ˆäº†
åŠ©æ‰‹: backend é¡¹ç›®çš„ Agent åœ¨ç­‰ç¡®è®¤:
      "åˆ é™¤ old_api.rsï¼Ÿ[y/N]"

ç”¨æˆ·: n
åŠ©æ‰‹: å·²å‘é€ï¼ŒAgent ç»§ç»­äº†

ç”¨æˆ·: æŠŠ 1 åœæ‰
åŠ©æ‰‹: å·²åœæ­¢ cam-abc123 (myapp)
```

### ç¤ºä¾‹ 4ï¼šTeam ä»»åŠ¡ç®¡ç†

```
ç”¨æˆ·: å¸®æˆ‘ä¿®å¤ myapp çš„ç™»å½• bug
åŠ©æ‰‹: å¥½ï¼Œåˆ›å»º Team å¤„ç†è¿™ä¸ªä»»åŠ¡...
      âœ… å·²åˆ›å»º Team myapp-login-fix
      - developer æ­£åœ¨åˆ†æé—®é¢˜

[å‡ åˆ†é’Ÿå]
åŠ©æ‰‹: ğŸ” myapp-login-fix/developer è¯·æ±‚æ‰§è¡Œ:
      git commit -m "fix: login bug"
      å›å¤ y å…è®¸ï¼Œn æ‹’ç»

ç”¨æˆ·: y
åŠ©æ‰‹: å·²å‘é€ï¼Œdeveloper ç»§ç»­æ‰§è¡Œä¸­...

[ä»»åŠ¡å®Œæˆ]
åŠ©æ‰‹: âœ… myapp-login-fix ä»»åŠ¡å®Œæˆ
      - ä¿®å¤äº† session è¿‡æœŸå¯¼è‡´çš„ç™»å½•å¤±è´¥
      - å·²æäº¤ commit: fix: login bug
```

### ç¤ºä¾‹ 5ï¼šTeam çŠ¶æ€æŸ¥è¯¢

```
ç”¨æˆ·: team è¿›åº¦æ€æ ·
åŠ©æ‰‹: ğŸ“Š å½“å‰ Team çŠ¶æ€

      myapp-login-fix
      â”œâ”€â”€ developer: æ‰§è¡Œä¸­ (context 45%)
      â”‚   æœ€è¿‘: ç¼–è¾‘ src/auth.rs
      â””â”€â”€ ä»»åŠ¡: 2/3 å®Œæˆ

ç”¨æˆ·: æœ‰ä»€ä¹ˆç­‰ç€æˆ‘
åŠ©æ‰‹: 1 ä¸ªå¾…å¤„ç†è¯·æ±‚:
      ğŸ” myapp-login-fix/developer
      æ‰§è¡Œ: npm test
      å›å¤ y å…è®¸ï¼Œn æ‹’ç»

ç”¨æˆ·: y
åŠ©æ‰‹: å·²å‘é€ï¼Œdeveloper ç»§ç»­äº†
```

---

## æµ‹è¯•æ–¹æ³•

ä½¿ç”¨ OpenClaw CLI æµ‹è¯•è‡ªç„¶è¯­è¨€äº¤äº’ï¼š

```bash
# åŸºæœ¬æµ‹è¯•å‘½ä»¤
openclaw agent --agent main --message "ä½ çš„è‡ªç„¶è¯­è¨€è¾“å…¥"

# æµ‹è¯•ç”¨ä¾‹
openclaw agent --agent main --message "çœ‹çœ‹åœ¨å¹²å˜›"
openclaw agent --agent main --message "å¸®æˆ‘åœ¨ myapp å¯åŠ¨ä¸ª Claude"
openclaw agent --agent main --message "ç»§ç»­ä¹‹å‰çš„"
openclaw agent --agent main --message "y"
openclaw agent --agent main --message "åœæ‰"
```

### æµ‹è¯•åœºæ™¯æ¸…å•

| åœºæ™¯ | æµ‹è¯•å‘½ä»¤ | é¢„æœŸè¡Œä¸º |
|------|----------|----------|
| æŸ¥çœ‹çŠ¶æ€ | `"ç°åœ¨è·‘ç€ä»€ä¹ˆ"` | åˆ—å‡ºè¿è¡Œä¸­çš„ agent |
| å¯åŠ¨ agent | `"åœ¨ /tmp å¯åŠ¨ Claude"` | åˆ›å»ºæ–° agent |
| æ¨¡ç³Šå¯åŠ¨ | `"å¼€ä¸ªæ–°çš„"` | è¯¢é—®é¡¹ç›®è·¯å¾„ |
| å‘é€ç¡®è®¤ | `"y"` | å‘é€åˆ°å½“å‰ agent |
| æ¢å¤ä¼šè¯ | `"ç»§ç»­ä¹‹å‰çš„"` | åˆ—å‡ºæœ€è¿‘ä¼šè¯ä¾›é€‰æ‹© |
| æŸ¥çœ‹æ—¥å¿— | `"çœ‹çœ‹è¾“å‡º"` | è¿”å›æœ€è¿‘ç»ˆç«¯è¾“å‡º |
| åœæ­¢ agent | `"åœæ‰"` | åœæ­¢å½“å‰ agent |
